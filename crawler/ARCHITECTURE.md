# Crawleræ¨¡å—æ¶æ„è®¾è®¡

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   main.py    â”‚  â”‚  å‘½ä»¤è¡Œå·¥å…·   â”‚  â”‚  APIæ¥å£     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       è°ƒåº¦å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              CrawlerScheduler                         â”‚  â”‚
â”‚  â”‚  â€¢ run_all()           è¿è¡Œæ‰€æœ‰çˆ¬è™«                   â”‚  â”‚
â”‚  â”‚  â€¢ run_by_type()       æŒ‰ç±»å‹è¿è¡Œ                     â”‚  â”‚
â”‚  â”‚  â€¢ å¹¶å‘æ§åˆ¶            Semaphore                      â”‚  â”‚
â”‚  â”‚  â€¢ å¢é‡æ›´æ–°            IncrementalUpdateManager       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ³¨å†Œä¸­å¿ƒå±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            CrawlerRegistry                            â”‚  â”‚
â”‚  â”‚  â€¢ register()          æ³¨å†Œçˆ¬è™«                       â”‚  â”‚
â”‚  â”‚  â€¢ get_crawler()       è·å–çˆ¬è™«ä¿¡æ¯                   â”‚  â”‚
â”‚  â”‚  â€¢ get_crawler_class() åŠ¨æ€åŠ è½½ç±»                     â”‚  â”‚
â”‚  â”‚  â€¢ get_crawler_runner() åŠ¨æ€åŠ è½½runner                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      çˆ¬è™«å®ç°å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           BaseWebScraper (æŠ½è±¡åŸºç±»)                  â”‚   â”‚
â”‚  â”‚  â€¢ fetch_page()        è·å–é¡µé¢                      â”‚   â”‚
â”‚  â”‚  â€¢ parse_timestamp()   è§£ææ—¶é—´                      â”‚   â”‚
â”‚  â”‚  â€¢ extract_links()     æå–é“¾æ¥                      â”‚   â”‚
â”‚  â”‚  â€¢ get_article_list()  è·å–åˆ—è¡¨ [æŠ½è±¡]               â”‚   â”‚
â”‚  â”‚  â€¢ get_article_detail() è·å–è¯¦æƒ… [æŠ½è±¡]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â–²                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚                   â”‚                   â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Anthropic  â”‚   â”‚  Google AI   â”‚   â”‚   Qbitai     â”‚     â”‚
â”‚  â”‚   Scraper   â”‚   â”‚   Scraper    â”‚   â”‚   Scraper    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         ...              ...                 ...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é…ç½®å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              constants.py                             â”‚  â”‚
â”‚  â”‚  â€¢ CRAWLER_CONFIGS      çˆ¬è™«é…ç½®åˆ—è¡¨                  â”‚  â”‚
â”‚  â”‚  â€¢ SCHEDULER_CONFIG     è°ƒåº¦å™¨é…ç½®                    â”‚  â”‚
â”‚  â”‚  â€¢ DEFAULT_HEADERS      é»˜è®¤HTTPå¤´                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å·¥å…·å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ProxyPool   â”‚  â”‚    Logger    â”‚  â”‚   Utils      â”‚      â”‚
â”‚  â”‚  ä»£ç†æ± ç®¡ç†   â”‚  â”‚   æ—¥å¿—å·¥å…·    â”‚  â”‚  å·¥å…·å‡½æ•°     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ‰§è¡Œæµç¨‹

### 1. å¯åŠ¨æµç¨‹

```
ç”¨æˆ·æ‰§è¡Œå‘½ä»¤
    â”‚
    â–¼
main.py è§£æå‚æ•°
    â”‚
    â–¼
åˆå§‹åŒ–æ•°æ®åº“
    â”‚
    â–¼
åˆ›å»º CrawlerScheduler
    â”‚
    â–¼
ä» CrawlerRegistry è·å–çˆ¬è™«åˆ—è¡¨
    â”‚
    â–¼
æŒ‰ç±»å‹åˆ†ç»„ï¼ˆcompany/news/toolsï¼‰
    â”‚
    â–¼
å¹¶å‘æ‰§è¡Œçˆ¬è™«
    â”‚
    â–¼
ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“
    â”‚
    â–¼
ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Š
```

### 2. å•ä¸ªçˆ¬è™«æ‰§è¡Œæµç¨‹

```
Scheduler è°ƒç”¨ get_crawler_runner(key)
    â”‚
    â–¼
Registry åŠ¨æ€å¯¼å…¥æ¨¡å—
    â”‚
    â–¼
è·å– runner å‡½æ•°
    â”‚
    â–¼
æ£€æŸ¥æ˜¯å¦éœ€è¦å¢é‡æ›´æ–°
    â”‚
    â”œâ”€ æ˜¯ â†’ è·³è¿‡çˆ¬å–
    â”‚
    â””â”€ å¦ â†’ æ‰§è¡Œçˆ¬è™«
            â”‚
            â–¼
        åˆ›å»º Scraper å®ä¾‹
            â”‚
            â–¼
        åˆå§‹åŒ– HTTP å®¢æˆ·ç«¯
            â”‚
            â–¼
        è·å–æ–‡ç« åˆ—è¡¨
            â”‚
            â–¼
        éå†è·å–æ–‡ç« è¯¦æƒ…
            â”‚
            â–¼
        ä¿å­˜åˆ°æ•°æ®åº“
            â”‚
            â–¼
        å…³é—­èµ„æº
```

### 3. åŠ¨æ€åŠ è½½æµç¨‹

```
é…ç½®å®šä¹‰ (constants.py)
    â”‚
    â–¼
æ³¨å†Œåˆ° Registry
    â”‚
    â–¼
Scheduler è¯·æ±‚çˆ¬è™«
    â”‚
    â–¼
Registry åŠ¨æ€å¯¼å…¥
    â”‚
    â”œâ”€ importlib.import_module(module_path)
    â”‚
    â””â”€ getattr(module, class_name/runner_name)
    â”‚
    â–¼
è¿”å›ç±»/å‡½æ•°å¯¹è±¡
    â”‚
    â–¼
Scheduler æ‰§è¡Œ
```

## ğŸ“¦ æ¨¡å—èŒè´£

### 1. constants.py
**èŒè´£**: é…ç½®ç®¡ç†
- å®šä¹‰æ‰€æœ‰çˆ¬è™«é…ç½®
- å®šä¹‰è°ƒåº¦å™¨å‚æ•°
- å®šä¹‰HTTPè¯·æ±‚å¤´
- æ•°æ®åº“è¡¨æ˜ å°„

**ç‰¹ç‚¹**:
- é…ç½®çš„å”¯ä¸€æ¥æº
- æ˜“äºä¿®æ”¹å’Œæ‰©å±•
- ç±»å‹å®‰å…¨

### 2. crawler_registry.py
**èŒè´£**: çˆ¬è™«æ³¨å†Œå’Œç®¡ç†
- æ³¨å†Œçˆ¬è™«åˆ°ä¸­å¿ƒ
- åŠ¨æ€åŠ è½½çˆ¬è™«ç±»
- åŠ¨æ€åŠ è½½runnerå‡½æ•°
- æŒ‰ç±»å‹æŸ¥è¯¢çˆ¬è™«

**ç‰¹ç‚¹**:
- ä½¿ç”¨å•ä¾‹æ¨¡å¼
- æ”¯æŒå»¶è¿ŸåŠ è½½
- ç¼“å­˜å·²åŠ è½½çš„ç±»

### 3. scheduler.py
**èŒè´£**: çˆ¬è™«è°ƒåº¦
- å¹¶å‘æ§åˆ¶
- å¢é‡æ›´æ–°åˆ¤æ–­
- æ‰§è¡Œè·Ÿè¸ªå’Œç»Ÿè®¡
- é”™è¯¯å¤„ç†

**ç‰¹ç‚¹**:
- ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶å¹¶å‘
- æ”¯æŒæŒ‰ç±»å‹æ‰§è¡Œ
- è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—

### 4. base_scraper.py
**èŒè´£**: çˆ¬è™«åŸºç±»
- HTTPè¯·æ±‚å°è£…
- é‡è¯•æœºåˆ¶
- ä»£ç†æ”¯æŒ
- é€šç”¨è§£ææ–¹æ³•

**ç‰¹ç‚¹**:
- æŠ½è±¡åŸºç±»
- å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨
- ä¸°å¯Œçš„å·¥å…·æ–¹æ³•

### 5. å…·ä½“çˆ¬è™«å®ç°
**èŒè´£**: å®ç°ç‰¹å®šç½‘ç«™çš„çˆ¬å–
- ç»§æ‰¿BaseWebScraper
- å®ç°get_article_list
- å®ç°get_article_detail
- æä¾›runnerå‡½æ•°

**ç‰¹ç‚¹**:
- ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘
- å¤ç”¨åŸºç±»åŠŸèƒ½
- ç»Ÿä¸€æ¥å£

## ğŸ¯ è®¾è®¡æ¨¡å¼

### 1. æ³¨å†Œä¸­å¿ƒæ¨¡å¼ (Registry Pattern)
```python
# æ³¨å†Œ
registry.register('qbitai', QbitaiScraper, ...)

# è·å–
scraper_class = registry.get_crawler_class('qbitai')
```

**ä¼˜åŠ¿**:
- è§£è€¦é…ç½®å’Œå®ç°
- æ”¯æŒåŠ¨æ€æ‰©å±•
- ç»Ÿä¸€ç®¡ç†

### 2. å·¥å‚æ¨¡å¼ (Factory Pattern)
```python
# Registry ä½œä¸ºå·¥å‚
crawler = registry.get_crawler_class(key)()
```

**ä¼˜åŠ¿**:
- å»¶è¿Ÿå®ä¾‹åŒ–
- ç»Ÿä¸€åˆ›å»ºé€»è¾‘
- æ˜“äºæµ‹è¯•

### 3. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (Template Method Pattern)
```python
class BaseWebScraper:
    # æ¨¡æ¿æ–¹æ³•
    async def crawl(self):
        await self.init()
        articles = await self.get_article_list()  # å­ç±»å®ç°
        for article in articles:
            detail = await self.get_article_detail(...)  # å­ç±»å®ç°
        await self.close()
```

**ä¼˜åŠ¿**:
- å®šä¹‰ç®—æ³•éª¨æ¶
- å­ç±»å®ç°ç»†èŠ‚
- ä»£ç å¤ç”¨

### 4. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)
```python
# ä¸åŒçš„å¢é‡æ›´æ–°ç­–ç•¥
class IncrementalUpdateManager:
    async def should_crawl(self, source, threshold):
        # ç­–ç•¥é€»è¾‘
```

**ä¼˜åŠ¿**:
- ç®—æ³•å¯æ›¿æ¢
- æ˜“äºæ‰©å±•
- é™ä½è€¦åˆ

## ğŸ” å…³é”®è®¾è®¡å†³ç­–

### 1. ä¸ºä»€ä¹ˆä½¿ç”¨åŠ¨æ€å¯¼å…¥ï¼Ÿ

**é—®é¢˜**: ç¡¬ç¼–ç å¯¼å…¥å¯¼è‡´ä»£ç è‡ƒè‚¿
```python
# âŒ ç¡¬ç¼–ç æ–¹å¼
from crawler.scraper1 import Scraper1
from crawler.scraper2 import Scraper2
# ... 10+ ä¸ªå¯¼å…¥

if key == 'scraper1':
    return Scraper1()
elif key == 'scraper2':
    return Scraper2()
# ... 10+ ä¸ªåˆ¤æ–­
```

**è§£å†³æ–¹æ¡ˆ**: åŠ¨æ€å¯¼å…¥
```python
# âœ… åŠ¨æ€å¯¼å…¥
module = importlib.import_module(module_path)
scraper_class = getattr(module, class_name)
```

**æ”¶ç›Š**:
- å‡å°‘ä»£ç é‡ 80%
- æ·»åŠ çˆ¬è™«æ— éœ€ä¿®æ”¹ä»£ç 
- æŒ‰éœ€åŠ è½½ï¼ŒèŠ‚çœå†…å­˜

### 2. ä¸ºä»€ä¹ˆåˆå¹¶ä¸¤ä¸ªè°ƒåº¦å™¨ï¼Ÿ

**é—®é¢˜**: ä¸¤ä¸ªè°ƒåº¦å™¨ä»£ç é‡å¤
- `scheduler.py` - ä¸²è¡Œ
- `advanced_scheduler.py` - å¹¶å‘

**è§£å†³æ–¹æ¡ˆ**: ç»Ÿä¸€è°ƒåº¦å™¨
```python
class CrawlerScheduler:
    def __init__(self, max_concurrent=3):
        self.semaphore = asyncio.Semaphore(max_concurrent)
```

**æ”¶ç›Š**:
- å‡å°‘ä»£ç é‡å¤
- ç»Ÿä¸€ç»´æŠ¤å…¥å£
- åŠŸèƒ½æ›´å®Œæ•´

### 3. ä¸ºä»€ä¹ˆä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Ÿ

**é—®é¢˜**: é…ç½®åˆ†æ•£ï¼Œéš¾ä»¥ç®¡ç†

**è§£å†³æ–¹æ¡ˆ**: é›†ä¸­åˆ°constants.py
```python
CRAWLER_CONFIGS = [
    {'key': 'xxx', 'module': 'xxx', ...},
    # æ‰€æœ‰é…ç½®åœ¨ä¸€å¤„
]
```

**æ”¶ç›Š**:
- é…ç½®æ¸…æ™°å¯è§
- æ˜“äºæ‰¹é‡ä¿®æ”¹
- æ”¯æŒé…ç½®éªŒè¯

### 4. ä¸ºä»€ä¹ˆä½¿ç”¨å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Ÿ

**é—®é¢˜**: èµ„æºç®¡ç†å®¹æ˜“å‡ºé”™
```python
# âŒ å®¹æ˜“å¿˜è®°å…³é—­
scraper = Scraper()
await scraper.init()
# ... å¦‚æœè¿™é‡Œå‡ºé”™ï¼Œèµ„æºæ³„æ¼
await scraper.close()
```

**è§£å†³æ–¹æ¡ˆ**: ä¸Šä¸‹æ–‡ç®¡ç†å™¨
```python
# âœ… è‡ªåŠ¨ç®¡ç†
async with Scraper() as scraper:
    # è‡ªåŠ¨initå’Œclose
```

**æ”¶ç›Š**:
- è‡ªåŠ¨èµ„æºæ¸…ç†
- å¼‚å¸¸å®‰å…¨
- ä»£ç æ›´ç®€æ´

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. å¹¶å‘æ§åˆ¶
```python
semaphore = asyncio.Semaphore(max_concurrent)

async def run_with_semaphore(task):
    async with semaphore:
        await task
```

**æ•ˆæœ**: 3å€é€Ÿåº¦æå‡

### 2. å¢é‡æ›´æ–°
```python
if time_diff < threshold:
    skip_crawl()  # è·³è¿‡æœ€è¿‘æ›´æ–°çš„
```

**æ•ˆæœ**: 50% æ—¶é—´èŠ‚çœ

### 3. è¿æ¥å¤ç”¨
```python
self.session = httpx.AsyncClient()  # å¤ç”¨è¿æ¥
```

**æ•ˆæœ**: å‡å°‘è¿æ¥å¼€é”€

### 4. å»¶è¿ŸåŠ è½½
```python
# åªåœ¨éœ€è¦æ—¶æ‰å¯¼å…¥æ¨¡å—
if not self._cached_class:
    self._cached_class = importlib.import_module(...)
```

**æ•ˆæœ**: å‡å°‘å¯åŠ¨æ—¶é—´

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

### 1. åˆ†å±‚é”™è¯¯å¤„ç†

```
Schedulerå±‚
    â”‚
    â”œâ”€ æ•è·å•ä¸ªçˆ¬è™«é”™è¯¯
    â”‚  â””â”€ è®°å½•å¤±è´¥ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–çˆ¬è™«
    â”‚
Scraperå±‚
    â”‚
    â”œâ”€ æ•è·ç½‘ç»œé”™è¯¯
    â”‚  â””â”€ é‡è¯•æœºåˆ¶
    â”‚
    â””â”€ æ•è·è§£æé”™è¯¯
       â””â”€ è®°å½•æ—¥å¿—ï¼Œè·³è¿‡è¯¥æ¡ç›®
```

### 2. ä¼˜é›…é™çº§

```python
try:
    result = await crawler.run()
except Exception as e:
    logger.error(f"Crawler failed: {e}")
    # ç»§ç»­æ‰§è¡Œå…¶ä»–çˆ¬è™«ï¼Œä¸å½±å“æ•´ä½“
```

## ğŸ”® æ‰©å±•æ€§è®¾è®¡

### 1. æ·»åŠ æ–°çˆ¬è™«ç±»å‹
```python
# åœ¨ CrawlerType æšä¸¾ä¸­æ·»åŠ 
class CrawlerType(Enum):
    COMPANY = "company"
    NEWS = "news"
    TOOLS = "tools"
    RESEARCH = "research"  # æ–°å¢
```

### 2. æ·»åŠ æ–°çš„è°ƒåº¦ç­–ç•¥
```python
class CustomScheduler(CrawlerScheduler):
    async def custom_strategy(self):
        # è‡ªå®šä¹‰è°ƒåº¦é€»è¾‘
```

### 3. æ·»åŠ æ–°çš„å­˜å‚¨åç«¯
```python
class StorageAdapter:
    async def save(self, article):
        # é€‚é…ä¸åŒçš„å­˜å‚¨
```

## ğŸ“ æ€»ç»“

### æ ¸å¿ƒä¼˜åŠ¿

1. **é…ç½®é©±åŠ¨** - æ‰€æœ‰é…ç½®é›†ä¸­ç®¡ç†
2. **åŠ¨æ€åŠ è½½** - æ— ç¡¬ç¼–ç ï¼Œæ˜“æ‰©å±•
3. **ç»Ÿä¸€æ¥å£** - æ ‡å‡†åŒ–çš„çˆ¬è™«æ¥å£
4. **å¹¶å‘æ‰§è¡Œ** - é«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦
5. **å¢é‡æ›´æ–°** - æ™ºèƒ½è·³è¿‡å·²æ›´æ–°æ•°æ®
6. **é”™è¯¯éš”ç¦»** - å•ä¸ªå¤±è´¥ä¸å½±å“æ•´ä½“
7. **èµ„æºç®¡ç†** - è‡ªåŠ¨æ¸…ç†ï¼Œé˜²æ­¢æ³„æ¼
8. **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ç±»å‹æç¤º

### è®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£** - æ¯ä¸ªæ¨¡å—èŒè´£æ˜ç¡®
- **å¼€é—­åŸåˆ™** - å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **ä¾èµ–å€’ç½®** - ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
- **æ¥å£éš”ç¦»** - æœ€å°åŒ–æ¥å£ä¾èµ–
- **DRYåŸåˆ™** - ä¸é‡å¤ä»£ç 

è¿™ä¸ªæ¶æ„è®¾è®¡ä½¿å¾—crawleræ¨¡å—æˆä¸ºä¸€ä¸ªé«˜è´¨é‡ã€æ˜“ç»´æŠ¤ã€å¯æ‰©å±•çš„çˆ¬è™«æ¡†æ¶ï¼ğŸ‰

