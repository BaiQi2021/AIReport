# é‡å­ä½(QbitAI)çˆ¬è™«ä½¿ç”¨æŒ‡å—

## åŠŸèƒ½è¯´æ˜

æœ¬çˆ¬è™«ç”¨äºæ·±åº¦çˆ¬å–é‡å­ä½(https://www.qbitai.com/)å®˜ç½‘çš„è¿‘ä¸¤å‘¨æ–‡ç« åŠè¯„è®ºæ•°æ®ï¼Œæ— éœ€ç™»é™†ï¼Œç›´æ¥çˆ¬å–å¹¶ä¿å­˜åˆ°MindSpideræ•°æ®åº“ã€‚

### åŠŸèƒ½ç‰¹æ€§

- âœ… æ— éœ€ç™»é™†ï¼Œç›´æ¥çˆ¬å–å…¬å¼€å†…å®¹
- âœ… çˆ¬å–è¿‘ä¸¤å‘¨å†…çš„æ‰€æœ‰æ–‡ç« 
- âœ… æå–æ–‡ç« è¯¦ç»†ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€å†…å®¹ã€ä½œè€…ã€å‘å¸ƒæ—¶é—´ã€åˆ†ç±»ã€æ ‡ç­¾ç­‰ï¼‰
- âœ… è·å–æ–‡ç« è¯„è®ºåŠè¯„è®ºè€…ä¿¡æ¯
- âœ… æ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°MySQLæ•°æ®åº“
- âœ… æ”¯æŒå¢é‡æ›´æ–°ï¼ˆé¿å…é‡å¤çˆ¬å–ï¼‰
- âœ… å®Œæ•´çš„æ—¥å¿—è®°å½•

## æ•°æ®åº“è¡¨ç»“æ„

çˆ¬è™«æ¶‰åŠä¸¤å¼ è¡¨ï¼š

### 1. qbitai_articleï¼ˆæ–‡ç« è¡¨ï¼‰
å­˜å‚¨é‡å­ä½æ–‡ç« ä¿¡æ¯ï¼š
- `article_id`: æ–‡ç« å”¯ä¸€ID
- `title`: æ–‡ç« æ ‡é¢˜
- `description`: æ–‡ç« æè¿°/æ‘˜è¦
- `content`: æ–‡ç« å®Œæ•´å†…å®¹
- `article_url`: æ–‡ç« é“¾æ¥
- `author`: ä½œè€…
- `publish_time`: å‘å¸ƒæ—¶é—´æˆ³
- `publish_date`: å‘å¸ƒæ—¥æœŸ
- `read_count`: é˜…è¯»æ•°
- `like_count`: ç‚¹èµæ•°
- `comment_count`: è¯„è®ºæ•°
- `share_count`: åˆ†äº«æ•°
- `collect_count`: æ”¶è—æ•°
- `category`: åˆ†ç±»
- `tags`: æ ‡ç­¾ï¼ˆJSONæ ¼å¼ï¼‰
- `cover_image`: å°é¢å›¾ç‰‡URL
- `source_keyword`: æ¥æºå…³é”®è¯
- `is_original`: æ˜¯å¦åŸåˆ›

### 2. qbitai_article_commentï¼ˆè¯„è®ºè¡¨ï¼‰
å­˜å‚¨æ–‡ç« è¯„è®ºä¿¡æ¯ï¼š
- `comment_id`: è¯„è®ºå”¯ä¸€ID
- `article_id`: å¯¹åº”çš„æ–‡ç« IDï¼ˆå¤–é”®ï¼‰
- `user_name`: è¯„è®ºè€…ç”¨æˆ·å
- `user_avatar`: è¯„è®ºè€…å¤´åƒURL
- `content`: è¯„è®ºå†…å®¹
- `publish_time`: å‘å¸ƒæ—¶é—´æˆ³
- `publish_date`: å‘å¸ƒæ—¥æœŸ
- `like_count`: ç‚¹èµæ•°
- `sub_comment_count`: å­è¯„è®ºæ•°
- `parent_comment_id`: çˆ¶è¯„è®ºID

## ç¯å¢ƒé…ç½®

### 1. å®‰è£…ä¾èµ–

```bash
cd /Users/james.bai/Documents/code/AIReport/MindSpider
pip install -r requirements.txt
```

ä¸»è¦ä¾èµ–ï¼š
- httpx: å¼‚æ­¥HTTPè¯·æ±‚
- beautifulsoup4: HTMLè§£æ
- sqlalchemy: ORMæ¡†æ¶
- loguru: æ—¥å¿—è®°å½•

### 2. é…ç½®æ•°æ®åº“

ç¼–è¾‘`.env`æ–‡ä»¶æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# æ•°æ®åº“é…ç½®
DB_DIALECT=mysql          # æ•°æ®åº“ç±»å‹ï¼šmysqlæˆ–postgresql
DB_HOST=localhost         # æ•°æ®åº“ä¸»æœº
DB_PORT=3306             # æ•°æ®åº“ç«¯å£
DB_USER=root             # æ•°æ®åº“ç”¨æˆ·å
DB_PASSWORD=password     # æ•°æ®åº“å¯†ç 
DB_NAME=mindspider       # æ•°æ®åº“åç§°
DB_CHARSET=utf8mb4       # å­—ç¬¦é›†
```

æˆ–è€…åˆ›å»º`.env`æ–‡ä»¶ï¼š
```
DB_DIALECT=mysql
DB_HOST=your_db_host
DB_PORT=3306
DB_USER=your_username
DB_PASSWORD=your_password
DB_NAME=mindspider
DB_CHARSET=utf8mb4
```

### 3. åˆ›å»ºæ•°æ®åº“è¡¨

æ–¹å¼ä¸€ï¼šä½¿ç”¨SQLè„šæœ¬
```bash
mysql -h your_host -u your_user -p your_password your_database < schema/mindspider_tables.sql
```

æ–¹å¼äºŒï¼šä½¿ç”¨Pythonè„šæœ¬ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
```bash
cd DeepSentimentCrawling/MediaCrawler
python
```

```python
from sqlalchemy.ext.asyncio import create_async_engine
from database.models import Base
import asyncio

async def init_db():
    engine = create_async_engine("mysql+aiomysql://user:password@host:3306/mindspider")
    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)

asyncio.run(init_db())
```

## ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šè¿è¡Œç›´æ¥çˆ¬è™«è„šæœ¬ï¼ˆæ¨èï¼‰

è¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œä¸éœ€è¦å¤æ‚çš„é…ç½®ï¼š

```bash
cd /Users/james.bai/Documents/code/AIReport/MindSpider/DeepSentimentCrawling

# çˆ¬å–è¿‘ä¸¤å‘¨çš„å†…å®¹ï¼ˆé»˜è®¤ï¼‰
python qbitai_scraper.py

# æˆ–æŒ‡å®šçˆ¬å–å¤©æ•°
python qbitai_scraper.py --days 7   # çˆ¬å–è¿‘ä¸€å‘¨
python qbitai_scraper.py --days 30  # çˆ¬å–è¿‘ä¸€ä¸ªæœˆ
```

**è¯´æ˜ï¼š**
- çˆ¬è™«ä¼šè‡ªåŠ¨è¯»å–MindSpideré…ç½®
- è‡ªåŠ¨ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“
- æ”¯æŒæ–­ç‚¹ç»­çˆ¬
- å®Œæ•´çš„è¿›åº¦æ—¥å¿—

### æ–¹æ³•äºŒï¼šåœ¨Pythonä¸­è°ƒç”¨

```python
import asyncio
import sys
from pathlib import Path

# æ·»åŠ è·¯å¾„
sys.path.append(str(Path(__file__).parent / "DeepSentimentCrawling"))

from qbitai_scraper import main

# è¿è¡Œçˆ¬è™«
articles, comments = asyncio.run(main())
print(f"çˆ¬å–å®Œæˆï¼å…±è·å– {articles} ç¯‡æ–‡ç« ï¼Œ{comments} æ¡è¯„è®º")
```

### æ–¹æ³•ä¸‰ï¼šé›†æˆåˆ°MindSpiderä¸»ç¨‹åº

ç¼–è¾‘ `main.py`ï¼Œæ·»åŠ é‡å­ä½çˆ¬è™«ï¼š

```python
from DeepSentimentCrawling.qbitai_scraper import main as qbitai_main

# åœ¨é€‚å½“çš„åœ°æ–¹è°ƒç”¨
articles, comments = asyncio.run(qbitai_main())
print(f"é‡å­ä½çˆ¬å–ç»“æœ: {articles} ç¯‡æ–‡ç« ï¼Œ{comments} æ¡è¯„è®º")
```

## çˆ¬å–æµç¨‹è¯´æ˜

```
1. åˆå§‹åŒ–çˆ¬è™«
   â””â”€ åˆ›å»ºHTTPå®¢æˆ·ç«¯
   â””â”€ è¿æ¥æ•°æ®åº“

2. å¾ªç¯çˆ¬å–æ–‡ç« 
   â”œâ”€ è·å–æ–‡ç« åˆ—è¡¨ï¼ˆé€é¡µï¼‰
   â”‚  â””â”€ è§£æé¡µé¢è·å–20ç¯‡æ–‡ç« 
   â”œâ”€ å¯¹æ¯ç¯‡æ–‡ç« ï¼š
   â”‚  â”œâ”€ è·å–æ–‡ç« è¯¦æƒ…
   â”‚  â”‚  â””â”€ æå–æ ‡é¢˜ã€å†…å®¹ã€ä½œè€…ã€æ—¶é—´ç­‰
   â”‚  â”œâ”€ æ£€æŸ¥å‘å¸ƒæ—¥æœŸ
   â”‚  â”‚  â””â”€ å¦‚æœè¶…å‡ºä¸¤å‘¨èŒƒå›´ï¼Œåœæ­¢çˆ¬å–
   â”‚  â”œâ”€ ä¿å­˜æ–‡ç« åˆ°æ•°æ®åº“
   â”‚  â”‚  â””â”€ æ”¯æŒå¢é‡æ›´æ–°
   â”‚  â”œâ”€ è·å–è¯„è®º
   â”‚  â”‚  â””â”€ æå–æ¯æ¡è¯„è®ºçš„å†…å®¹ã€ç”¨æˆ·ã€æ—¶é—´ç­‰
   â”‚  â””â”€ ä¿å­˜è¯„è®ºåˆ°æ•°æ®åº“
   â”‚     â””â”€ æ”¯æŒå¢é‡æ›´æ–°
   â””â”€ å»¶è¿Ÿåç»§ç»­ä¸‹ä¸€é¡µ

3. çˆ¬å–å®Œæˆ
   â””â”€ è¾“å‡ºç»Ÿè®¡ç»“æœ
```

## æ—¥å¿—å’Œè°ƒè¯•

çˆ¬è™«ä¼šè¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š

```
2025-12-16 10:30:45 | INFO | ğŸš€ é‡å­ä½(QbitAI)çˆ¬è™«å¯åŠ¨
2025-12-16 10:30:45 | INFO | ğŸ“ ç½‘å€: https://www.qbitai.com/
2025-12-16 10:30:45 | INFO | â° æ—¶é—´èŒƒå›´: 2025-12-02 åˆ° 2025-12-16
2025-12-16 10:30:46 | INFO | è·å–ç¬¬ 1 é¡µæ–‡ç« åˆ—è¡¨...
2025-12-16 10:30:47 | INFO | æ‰¾åˆ° 20 ä¸ªå¯èƒ½çš„æ–‡ç« å…ƒç´ 
2025-12-16 10:30:47 | INFO | ç¬¬ 1 é¡µå…±è·å– 18 ç¯‡æ–‡ç« 
2025-12-16 10:30:48 | INFO | è·å–æ–‡ç« è¯¦æƒ…: article_001
2025-12-16 10:30:49 | INFO | æˆåŠŸè·å–æ–‡ç« è¯¦æƒ…: AIèŠ¯ç‰‡æ–°è¿›å±•
2025-12-16 10:30:49 | INFO | æ–‡ç« ä¿å­˜æˆåŠŸ: article_001
...
2025-12-16 11:15:30 | INFO | âœ… çˆ¬å–å®Œæˆ!
2025-12-16 11:15:30 | INFO | ğŸ“Š ç»Ÿè®¡ç»“æœ:
2025-12-16 11:15:30 | INFO |    - æ–‡ç« æ€»æ•°: 145
2025-12-16 11:15:30 | INFO |    - è¯„è®ºæ€»æ•°: 1203
2025-12-16 11:15:30 | INFO | ğŸ’¾ æ•°æ®å·²ä¿å­˜åˆ°æ•°æ®åº“
```

## å¸¸è§é—®é¢˜

### Q1: çˆ¬è™«æŠ¥æ•°æ®åº“è¿æ¥é”™è¯¯

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤æ•°æ®åº“æœåŠ¡è¿è¡Œæ­£å¸¸
2. æ£€æŸ¥`.env`é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®åº“ä¿¡æ¯
3. ç¡®è®¤MySQLç”¨æˆ·æœ‰è®¿é—®æƒé™
4. å°è¯•æ‰‹åŠ¨è¿æ¥æ•°æ®åº“éªŒè¯é…ç½®

```bash
mysql -h your_host -u your_user -p -D mindspider
```

### Q2: çˆ¬è™«æ— æ³•è®¿é—®ç½‘ç«™

**A:** å¯èƒ½çš„åŸå› ï¼š
1. ç½‘ç»œè¿æ¥é—®é¢˜ - æ£€æŸ¥ç½‘ç»œ
2. IPè¢«é™åˆ¶ - ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•
3. ç½‘ç«™æ›´æ–° - å¯èƒ½éœ€è¦æ›´æ–°é€‰æ‹©å™¨

### Q3: æ²¡æœ‰çˆ¬åˆ°æ•°æ®

**A:** 
1. æ£€æŸ¥æ—¥å¿—è¾“å‡ºï¼ŒæŸ¥çœ‹æ˜¯å¦æ­£ç¡®è§£æäº†HTML
2. å¯èƒ½éœ€è¦æ›´æ–°HTMLé€‰æ‹©å™¨ï¼ˆç½‘ç«™é¡µé¢ç»“æ„å¯èƒ½å˜åŒ–ï¼‰
3. ç¡®è®¤çˆ¬è™«æœ‰æ­£ç¡®çš„æƒé™å†™å…¥æ•°æ®åº“

### Q4: å¦‚ä½•ä¿®æ”¹çˆ¬å–æ—¶é—´èŒƒå›´ï¼Ÿ

**A:** ä¿®æ”¹çˆ¬è™«å‚æ•°ï¼ˆé»˜è®¤14å¤©ï¼‰ï¼š
```bash
python qbitai_scraper.py --days 30  # çˆ¬å–30å¤©
```

æˆ–åœ¨ä»£ç ä¸­ä¿®æ”¹ï¼š
```python
end_date = datetime.now()
start_date = end_date - timedelta(days=30)  # æ”¹ä¸º30å¤©
```

### Q5: å¦‚ä½•åªçˆ¬å–ç‰¹å®šæ—¥æœŸçš„å†…å®¹ï¼Ÿ

**A:** ä¿®æ”¹ä»£ç ä¸­çš„æ—¶é—´èŒƒå›´é€»è¾‘ï¼š
```python
# åœ¨ qbitai_scraper.py ä¸­æ‰¾åˆ°è¿™éƒ¨åˆ†
start_date = datetime(2025, 12, 1)  # å¼€å§‹æ—¥æœŸ
end_date = datetime(2025, 12, 31)   # ç»“æŸæ—¥æœŸ
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **è°ƒæ•´å»¶è¿Ÿæ—¶é—´**
   - å‡å°‘å»¶è¿Ÿå¯ä»¥åŠ å¿«çˆ¬å–é€Ÿåº¦ï¼ˆä½†å¯èƒ½è¢«é™åˆ¶ï¼‰
   - å¢åŠ å»¶è¿Ÿå¯ä»¥é™ä½è¢«å°IPçš„é£é™©

2. **å¹¶å‘çˆ¬å–**
   - ä¿®æ”¹ä»£ç æ”¯æŒå¹¶å‘è¯·æ±‚ï¼ˆéœ€è¦æ›´å°å¿ƒï¼‰

3. **å¢é‡æ›´æ–°**
   - çˆ¬è™«å·²è‡ªåŠ¨æ”¯æŒï¼Œåªæ›´æ–°æ–°å¢å†…å®¹

4. **æ•°æ®åº“ä¼˜åŒ–**
   - ç¡®ä¿æ•°æ®åº“æœ‰é€‚å½“çš„ç´¢å¼•
   - è€ƒè™‘å®šæœŸå¤‡ä»½æ•°æ®

## æ•…éšœæ¢å¤

å¦‚æœçˆ¬è™«å› ç½‘ç»œé—®é¢˜ä¸­æ–­ï¼Œå¯ä»¥å®‰å…¨åœ°é‡æ–°è¿è¡Œï¼š
- çˆ¬è™«ä¼šæ£€æŸ¥å·²å­˜åœ¨çš„æ•°æ®
- åªä¿å­˜/æ›´æ–°æ–°å¢æ•°æ®
- ä¸ä¼šé€ æˆé‡å¤

## æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ—¥å¿—æ–‡ä»¶è¾“å‡º
2. æ•°æ®åº“é…ç½®
3. ç½‘ç»œè¿æ¥
4. ç½‘ç«™ç»“æ„æ˜¯å¦å˜åŒ–

## è®¸å¯å£°æ˜

æœ¬çˆ¬è™«ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ç›®çš„ä½¿ç”¨ã€‚ä½¿ç”¨è€…åº”éµå®ˆä»¥ä¸‹åŸåˆ™ï¼š
1. ä¸å¾—ç”¨äºä»»ä½•å•†ä¸šç”¨é€”
2. ä½¿ç”¨æ—¶åº”éµå®ˆç›®æ ‡å¹³å°çš„ä½¿ç”¨æ¡æ¬¾å’Œrobots.txtè§„åˆ™
3. ä¸å¾—è¿›è¡Œå¤§è§„æ¨¡çˆ¬å–æˆ–å¯¹å¹³å°é€ æˆè¿è¥å¹²æ‰°
4. åº”åˆç†æ§åˆ¶è¯·æ±‚é¢‘ç‡
5. ä¸å¾—ç”¨äºä»»ä½•éæ³•æˆ–ä¸å½“çš„ç”¨é€”

è¯¦è§é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„LICENSEæ–‡ä»¶ã€‚
